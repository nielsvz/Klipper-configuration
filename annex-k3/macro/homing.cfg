[gcode_macro _HOME_VARIABLES]
variable_homing_pos_x:     111.5   # x position when homing z - center of x axis minus probe x_offset
variable_homing_pos_y:     90.0    # y position when homing z - center of y axis minus probe x_offset
variable_homing_pos_z_end: 5.0     # z position to move to after homing
variable_xy_speed:         200     # x and y speed before homing z (mm/s)
variable_z_speed:          5       # z speed before and after homing (mm/s)
variable_z_hop:            5.0     # distance to lift z before homing
gcode:

[gcode_macro G32]
gcode:
  BED_MESH_CLEAR
  {% if "z" not in printer.toolhead.homed_axes %} ; G28 Home if needed
    RESPOND MSG="Homing"
    G28
  {% endif %}
  Z_TILT_SCAN
  G28 Z
